{#
/**
 * @file
 * Default theme implementation for the basic structure of a single Drupal page.
 *
 * Variables:
 * - logged_in: A flag indicating if user is logged in.
 * - root_path: The root path of the current page (e.g., node, admin, user).
 * - node_type: The content type for the current node, if the page is a node.
 * - head_title: List of text elements that make up the head_title variable.
 *   May contain or more of the following:
 *   - title: The title of the page.
 *   - name: The name of the site.
 *   - slogan: The slogan of the site.
 * - page_top: Initial rendered markup. This should be printed before 'page'.
 * - page: The rendered page markup.
 * - page_bottom: Closing rendered markup. This variable should be printed after
 *   'page'.
 * - db_offline: A flag indicating if the database is offline.
 * - placeholder_token: The token for generating head, css, js and js-bottom
 *   placeholders.
 *
 * @see template_preprocess_html()
 *
 * @ingroup themeable
 */
#}

<!DOCTYPE html>
<html{{ html_attributes }}>
<head>
    <head-placeholder token="{{ placeholder_token|raw }}">
    
    {% set hmtlTitle = node_type %}
    
    {% if hmtlTitle starts with "home_" %}
    	{% set hmtlTitle = head_title['name'] %}
    {% else %}
    	{% set hmtlTitle = head_title|safe_join(' | ') %}
    {% endif %}
    
    {% if node_title %}
    	<title>{{node_title}} | Terror Behind the Walls</title>
     {% else %}
    	<title>{{hmtlTitle|raw}}</title>
    {% endif %}
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    {{meta_tags|raw}}
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.css">


	<script type="text/javascript" src="https://code.jquery.com/jquery.min.js"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.6/handlebars.min.js"></script>
	
	<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="https://use.typekit.net/vcn8cop.js"></script>
	<script>try{Typekit.load({ async: true });}catch(e){}</script>
	<script src="{{ path('<front>') }}themes/tbtw/js/classie.js"></script>
	<script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js"></script>
	
    <css-placeholder token="{{ placeholder_token|raw }}">
    <js-placeholder token="{{ placeholder_token|raw }}">  
    
    <style ="text/css">
    	body {
	    	baclground:red !important;
    	}
    	.open>.dropdown-menu {
	    	display:none;
    	}
    	
    	.list-item-detail img {
	    	width:25%;
    	}
    	
    	.list-item-detail h2 {
	    	color:white;
    	}
    	
    	.list-item-detail a {
	    	color:white;
    	}
    	
    	.js-quickedit-page-title {
	    	display:none;
    	}
    	.visit-dropdown li:eq(1) {
	    	padding-left:20px;	
    	}
    	
    	.visit-dropdown li:eq(2) {
	    	padding-left:20px;
    	}
    	
    	.request-form .form-control {
	    	color:white !important;
    	}
    	
    	@media (max-width: 600px) {

	    	.calendar .colors-boxes .box {
		    	width: calc(33% - 4.8px) !important;
	    	}
	    
	    }
	    
	    .breadcrumb {
		    display:none;
	    }
    	
    </style>
    
    
    <!-- FAVICONS -->
    <!--<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">-->
	<link rel="manifest" href="/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
    
    
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    
    {{tracking_pixel|raw}}
</head>
<body {{ attributes }} class="fade-in" data-spy="scroll" data-target="#artwork-scrollspy" data-offset="200">

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	
	  ga('create', 'UA-212020-4', 'auto');
	  ga('send', 'pageview');
	
	</script>
	
	<div class="mobile-buy-now visible-xs" data-path="{{ path('entity.node.canonical', {'node': 43}) }}">
        <p class="text-center"><span class="glyphicon glyphicon-calendar"></span>  Buy Now & Save On Tickets!</p>
    </div>
    
    
    <div class="show-site-switcher">
        <span class="glyphicon glyphicon-triangle-bottom"></span>
    </div>
    <div class="site-switcher-section hidden-sm hidden-xs" style="display:none;">
        <ul class="list-inline">
            <li>
                <a href="javascript: void(0);" class="switch-caret">
                    <span class="slide-up-menu glyphicon glyphicon-triangle-top"></span>
                </a>
            </li>

            <li>
                <a href="https://www.easternstate.org/" class="switch-caret">
                    Eastern State Penitentiary
                </a>
            </li>

            <li>
                <a href="{{ path('<front>') }}" class="switch-caret">
                    Terror Behind the Walls
                </a>
            </li>
        </ul>
    </div>
    
	<a href="#main-content" class="visually-hidden focusable">
      {{ 'Skip to main content'|t }}
    </a>
    {{ page_top }}
    {{ page }}
    {{ page_bottom }}
    <js-bottom-placeholder token="{{ placeholder_token|raw }}">
    <div id="viewer"><div id="viewer-inner"></div></div>   
    
    <!-- The Modal -->
    <div id="Attraction-Modal" class="attraction-modal">

      <!-- Modal content -->
      <div class="attraction-modal-content">
      	<button class="btn close">
      	<svg version="1.1"
				 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"
				 x="0px" y="0px" width="34.4px" height="34.4px" viewBox="0 0 34.4 34.4" enable-background="new 0 0 34.4 34.4"
				 xml:space="preserve">
			<defs>
			</defs>
			<path fill="" d="M33.8,30.9L3.5,0.6c-0.8-0.8-2.1-0.8-2.9,0s-0.8,2.1,0,2.9l30.3,30.3c0.8,0.8,2.1,0.8,2.9,0
				S34.6,31.7,33.8,30.9z"/>
			<path fill="" d="M30.9,0.6L0.6,30.9c-0.8,0.8-0.8,2.1,0,2.9s2.1,0.8,2.9,0L33.8,3.5c0.8-0.8,0.8-2.1,0-2.9S31.7-0.2,30.9,0.6
				z"/>
			</svg>
		</button>
        <div class="attraction-modal-body text-center attraction-video" style="margin-bottom:-5px;">
          <iframe width="100%" height="100%" src="https://www.youtube.com/embed/AdPvP2AL3Os" frameborder="0" allowfullscreen></iframe>
        </div>
        <div class="attraction-modal-footer">
          <div class="attraction-image" style="width:200px; float:left;">
            <img src="" style="width:100%;" />
          </div>

          <div class="attraction-description" >
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod. Excepteur sint occaecat cupidatat non proident, sunt in culpa. Do eiusmod. Exc amet,</p>
          </div>

          <br style="clear:both;" />
        </div>
      </div>

    </div>

    <!-- The Modal -->
    <div id="Preview-Modal" class="attraction-modal" data-vimeo="https://player.vimeo.com/video/176338495">

      <!-- Modal content -->
      <div class="attraction-modal-content">
      	<button class="btn close">
      	<svg version="1.1"
				 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"
				 x="0px" y="0px" width="34.4px" height="34.4px" viewBox="0 0 34.4 34.4" enable-background="new 0 0 34.4 34.4"
				 xml:space="preserve">
			<defs>
			</defs>
			<path fill="" d="M33.8,30.9L3.5,0.6c-0.8-0.8-2.1-0.8-2.9,0s-0.8,2.1,0,2.9l30.3,30.3c0.8,0.8,2.1,0.8,2.9,0
				S34.6,31.7,33.8,30.9z"/>
			<path fill="" d="M30.9,0.6L0.6,30.9c-0.8,0.8-0.8,2.1,0,2.9s2.1,0.8,2.9,0L33.8,3.5c0.8-0.8,0.8-2.1,0-2.9S31.7-0.2,30.9,0.6
				z"/>
			</svg>
		</button>

      	 <div class="attraction-modal-body text-center" style="margin-bottom:-5px;">
         <iframe src="https://player.vimeo.com/video/176338495" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
        </div>
      </div>

    </div>     
    
    
    <script>
    
    function createCookie(name,value,days) {
	    var expires = "";
	    if (days) {
	        var date = new Date();
	        date.setTime(date.getTime() + (days*24*60*60*1000));
	        expires = "; expires=" + date.toUTCString();
	    }
	    document.cookie = name + "=" + value + expires + "; path=/";
	}
	
	function readCookie(name) {
	    var nameEQ = name + "=";
	    var ca = document.cookie.split(';');
	    for(var i=0;i < ca.length;i++) {
	        var c = ca[i];
	        while (c.charAt(0)==' ') c = c.substring(1,c.length);
	        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
	    }
	    return null;
	}

    
    $(function(){
	    var cookieName = readCookie('site-swticher');
	    if(cookieName) {
		    
		    if(cookieName == 'hide') {
			    $('.site-switcher-section').hide();
			    $('.show-site-switcher').show();
		    } else {
			   $('.site-switcher-section').show();
			    $('.show-site-switcher').hide(); 
		    }
		    
	    } else {
		    $('.site-switcher-section').show();
	    }

    $('.close-icon').click(function(){
	    $('.calendar-widget').removeClass('display-block');  
        $(".calendar-widget").addClass('display-none');    
    });

     var slideLeftBtn = document.querySelector('#c-button--slide-right');

    slideLeftBtn.addEventListener('click', function(e) {
        var slideLeft = new Menu({
      wrapper: '#o-wrapper',
      type: 'slide-right',
      menuOpenerClass: '.c-button',
      maskId: '#c-mask'
    });
      e.preventDefault;
      slideLeft.open();
    });

    

    $('.watch-preview').click(function(){
        var video = $(this).data('video');
        var description = $(this).data('description');
        var image = $(this).data('image');
        var title = $(this).data('title');

        //set html

        //launch modal

        // Get the modal
        var modal = document.getElementById('Preview-Modal');

        
        // Get the <span> element that closes the modal
        //var span = document.getElementsByClassName("close")[0];
        modal.style.display = "block";
        var vimeo = $("#Preview-Modal").data('vimeo');
        $("#Preview-Modal iframe").attr("src", vimeo + "?autoplay=1");
                
        // When the user clicks on <span> (x), close the modal
        /*span.onclick = function() {
            modal.style.display = "none";
        }*/

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
               var vimeo = $("#Preview-Modal").data('vimeo');
               $("#Preview-Modal iframe").attr("src", vimeo);
            }
        }
        
        window.ontouchstart= function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
                var vimeo = $("#Preview-Modal").data('vimeo');
                $("#Preview-Modal iframe").attr("src", vimeo);
            }
        }
    });

    $('.bubble').click(function(){
        var video = $(this).data('video');
        var description = $(this).data('desc');
        var image = $(this).data('image');
        var title = $(this).data('title');

        //set html
        $('.attraction-video').html(video);
        $('.attraction-description').html(description);
        $('.attraction-image').html("<img src='" + image + "' style='width: 90%;' />");
        
        //launch modal

        // Get the modal
        var modal = document.getElementById('Attraction-Modal');

        
        // Get the <span> element that closes the modal
        //var span = document.getElementsByClassName("close")[0];
        modal.style.display = "block";

        // When the user clicks on <span> (x), close the modal
        /*span.onclick = function() {
            modal.style.display = "none";
        }*/

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
                $('.attraction-video').html("<span></span>");
            }
        }
    });

    $('.panel-title a').click(function(){
        var hasClass = $( this ).children("span").hasClass( "glyphicon-triangle-right" );
        $(".glyphicon-triangle-bottom").addClass("glyphicon-triangle-right").removeClass("glyphicon-triangle-bottom");

        if(hasClass) {
            $( this ).children("span").addClass("glyphicon-triangle-bottom");
            $( this ).children("span").removeClass("glyphicon-triangle-right");
        } else {
            $( this ).children("span").addClass("glyphicon-triangle-right");
            $( this ).children("span").removeClass("glyphicon-triangle-bottom");
        }
    });
    
    //Activate any tooltips on the page
});

    
    </script>
    
    
    <script type="text/javascript">
		window.mobileAndTabletcheck = function() {
		  var check = false;
		  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
		  return check;
		};
		
		
		
		function addEmail(email) {
			if(email) {
	       		var url = "https://www.easternstate.org/newsletter/data/1/examples/add-email.php?email=" + email;
	       		
			    $('.error-newsletter').show();
	       		$('.error-newsletter').html("<img src='{{front_page}}themes/historic/assets/loading.gif' />");
	       		$.ajax({
		            type: 'GET',
		            url: url,
		            success: function (msg) {
		
		                if(msg == "true") {
			                $('.error-newsletter').text("You are subscribed. Thanks!");
		                } else {
			                $('.error-newsletter').text("You're already subscribed. Thanks!");
		                }
		
		            },
		            error: function (request, status, error) {
						$('.error-newsletter').text("An error has occured, please try again later.");
		            }
		        });
		   	}
		}
		
		
        $(document).ready(function(){
			
    		$('.visit-dropdown li:eq(1)').addClass('indent-li');
    		$('.visit-dropdown li:eq(2)').addClass('indent-li');
    		
    		$('.email-text').keypress(function (e) {
				if (e.which == 13) {
					var email = $('.email-text').val();
					addEmail(email);
				}
			});
	        
	        $('.btn-subscribe').click(function(){
		       var email = $('.email-text').val();
		       addEmail(email);
	        });
	        
	        $('.dropdown-toggle').click(function(event){
			     event.stopPropagation();
			 });
			 
            setInterval(function(){
				$(".bubble").animate({ top: "-=1%" }, function(){
					$(this).animate({ top: "+=1%" });
				});
			}, 3000);
			
			var active_link_arr = $('.navbar-right li.active').parent().parent().find('a');
			
			if(active_link_arr) {
				if(active_link_arr.length > 0) {
					var item = active_link_arr[0];
					item.className += " unerline_active";
					console.log(item.innerText);
					$('.breadcrumb li:eq(0) a').text(item.innerText);
				}
			}
			
			var scroll_start = 0;
			var startchange = $('main');
			var offset = startchange.offset();
			if (startchange.length){
				$(document).scroll(function() { 
					scroll_start = $(this).scrollTop();
					if(scroll_start > offset.top) {
						$("header.navbar").addClass('navbar-fixed-top');
						
						if(!mobileAndTabletcheck()) {
							$("header.navbar").addClass('navbar-fixed-top-desktop');	
						}
						
						$("header.navbar").css('background-color', 'black');
       				} else {
	       				$("header.navbar").removeClass('navbar-fixed-top');
	       				if(!mobileAndTabletcheck()) {
							$("header.navbar").removeClass('navbar-fixed-top-desktop');	
						}
       				}
   				});
    		}
    		
    		
    		$('.mobile-buy-now').click(function(){
	    		var path = $(this).data('path');
	    		var url = window.location.origin + path;
				
				window.location.replace(url);
    		});
    		
    		
    		

		// breadCrumbMaker();

        });
        
        function breadCrumbMaker () {
	        var pathArray = location.href.split('/').slice(3);
	        var breadCrumbs = $('.breadcrumb');
	        
	        pathArray.shift();
	        pathArray.shift();
	        
	        if(breadCrumbs.length > 0) {
		        
		        if(pathArray.length == 1) {
			        
			        if(pathArray[0] == "node") {
				    	$('.breadcrumb li:eq(0) a').text("Home");    
			        } else {
				        $('.breadcrumb li:eq(0) a').text(capitalizeFirstLetter(pathArray[0])); 
			        }
			     	$('.breadcrumb li:eq(1').hide();   
		        } else {	
			        if(pathArray[0] == "node") {
				    	$('.breadcrumb li:eq(0) a').text("Home");    
			        } else {
				        $('.breadcrumb li:eq(0) a').text(capitalizeFirstLetter(pathArray[pathArray.length - 2])); 
			        }
		        }
	        }
        }
        
        function capitalizeFirstLetter(string) {
		    var str =  string.charAt(0).toUpperCase() + string.slice(1);
		    
		    return str.replace("-", " ");
		}
		
		var $window = $(window);
	    var $callout = $('#callout');
		
	    $window.on('scroll', function() {
	        var startZone = $('main').offset().top - 300;
	        var endZone = $('footer').offset().top - $window.height();
	        
	        if($window.scrollTop() > 225 && $window.scrollTop() < 600) {
		        $callout.animate({'opacity': '1.0'}, 175);
	        } else if($window.scrollTop() > 600 && !($window.scrollTop() > 225 && $window.scrollTop() < 600)) {
		         $callout.stop(true).animate({'opacity': '0'}, 175);
	        } else if($window.scrollTop() < 225) {
		         $callout.stop(true).animate({'opacity': '0'}, 175);
	        }
	    });
	    
	    
    </script>
</body>
</html>


